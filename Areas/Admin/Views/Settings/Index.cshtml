@model SiteSettings
@{
    ViewData["Title"] = "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
</div>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="card-admin">
    <div class="card-body">
        <form asp-action="Index" method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs mb-4" id="settingsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button">
                        <i class="fas fa-cog me-2"></i>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button">
                        <i class="fas fa-info-circle me-2"></i>Ù…Ù† Ù†Ø­Ù†
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button">
                        <i class="fas fa-phone me-2"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="legal-tab" data-bs-toggle="tab" data-bs-target="#legal" type="button">
                        <i class="fas fa-gavel me-2"></i>Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="settingsTabContent">
                <!-- General Settings -->
                <div class="tab-pane fade show active" id="general" role="tabpanel">
                    <h5 class="text-primary mb-3"><i class="fas fa-image me-2"></i>Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹</h5>
                    
                    @if (!string.IsNullOrEmpty(Model.SiteLogo))
                    {
                        <div class="mb-3">
                            <img src="@Model.SiteLogo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹" style="max-height: 100px;" class="img-thumbnail">
                        </div>
                    }

                    <div class="mb-3">
                        <label for="logoFile" class="form-label">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø±</label>
                        <input type="file" name="logoFile" id="logoFile" class="form-control" accept="image/*">
                        <div class="form-text">Ø§Ø®ØªØ± Ù…Ù„Ù ØµÙˆØ±Ø© Ù„Ù„Ø´Ø¹Ø§Ø± (PNG, JPG, GIF)</div>
                    </div>
                </div>

                <!-- About Us -->
                <div class="tab-pane fade" id="about" role="tabpanel">
                    <h5 class="text-primary mb-3"><i class="fas fa-info-circle me-2"></i>Ù…Ù† Ù†Ø­Ù†</h5>
                    
                    <!-- Arabic -->
                    <div class="mb-3">
                        <label asp-for="AboutUs" class="form-label">
                            Ù…Ù† Ù†Ø­Ù† (Ø¹Ø±Ø¨ÙŠ) <span class="flag-icon">ğŸ‡®ğŸ‡¶</span>
                        </label>
                        <textarea asp-for="AboutUs" class="form-control" rows="5"
                                  placeholder="Ø§ÙƒØªØ¨ Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙŠ ÙŠÙ‚Ø¯Ù…Ù‡Ø§..."></textarea>
                        <span asp-validation-for="AboutUs" class="text-danger"></span>
                    </div>

                    <!-- English -->
                    <div class="mb-3">
                        <label asp-for="AboutUsEn" class="form-label">
                            About Us (English) <span class="flag-icon">ğŸ‡¬ğŸ‡§</span>
                        </label>
                        <textarea asp-for="AboutUsEn" class="form-control" rows="5"
                                  placeholder="Write about the site and services..."></textarea>
                        <span asp-validation-for="AboutUsEn" class="text-danger"></span>
                    </div>

                    <!-- Kurdish -->
                    <div class="mb-3">
                        <label asp-for="AboutUsKu" class="form-label">
                            Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ Ø¦ÛÙ…Û• (Ú©ÙˆØ±Ø¯ÛŒ) <span class="flag-icon">ğŸ´</span>
                        </label>
                        <textarea asp-for="AboutUsKu" class="form-control" rows="5"
                                  placeholder="Ø¨Ø§Ø³ÛŒ Ù…Ø§ÚµÙ¾Û•Ú•Û•Ú©Û• Ùˆ Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒÛ•Ú©Ø§Ù† Ø¨Ú©Û•..."></textarea>
                        <span asp-validation-for="AboutUsKu" class="text-danger"></span>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="tab-pane fade" id="contact" role="tabpanel">
                    <h5 class="text-primary mb-3"><i class="fas fa-phone me-2"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h5>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="ContactPhone" class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                                <input asp-for="ContactPhone" class="form-control" placeholder="+964 770 123 4567">
                                <span asp-validation-for="ContactPhone" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="ContactWhatsApp" class="form-label">Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨</label>
                                <input asp-for="ContactWhatsApp" class="form-control" placeholder="+964 770 123 4567">
                                <span asp-validation-for="ContactWhatsApp" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="ContactEmail" class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input asp-for="ContactEmail" type="email" class="form-control" placeholder="info@reversemarket.iq">
                                <span asp-validation-for="ContactEmail" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">
                    <h5 class="text-primary mb-3"><i class="fas fa-share-alt me-2"></i>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h5>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="FacebookUrl" class="form-label">
                                    <i class="fab fa-facebook text-primary me-1"></i>ÙÙŠØ³Ø¨ÙˆÙƒ
                                </label>
                                <input asp-for="FacebookUrl" class="form-control" placeholder="https://facebook.com/yourpage">
                                <span asp-validation-for="FacebookUrl" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="InstagramUrl" class="form-label">
                                    <i class="fab fa-instagram text-danger me-1"></i>Ø¥Ù†Ø³ØªØºØ±Ø§Ù…
                                </label>
                                <input asp-for="InstagramUrl" class="form-control" placeholder="https://instagram.com/yourpage">
                                <span asp-validation-for="InstagramUrl" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="TwitterUrl" class="form-label">
                                    <i class="fab fa-twitter text-info me-1"></i>ØªÙˆÙŠØªØ±
                                </label>
                                <input asp-for="TwitterUrl" class="form-control" placeholder="https://twitter.com/yourpage">
                                <span asp-validation-for="TwitterUrl" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-3">
                                <label asp-for="YouTubeUrl" class="form-label">
                                    <i class="fab fa-youtube text-danger me-1"></i>ÙŠÙˆØªÙŠÙˆØ¨
                                </label>
                                <input asp-for="YouTubeUrl" class="form-control" placeholder="https://youtube.com/yourchannel">
                                <span asp-validation-for="YouTubeUrl" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Legal Pages -->
                <div class="tab-pane fade" id="legal" role="tabpanel">
                    <!-- Privacy Policy -->
                    <h5 class="text-primary mb-3"><i class="fas fa-shield-alt me-2"></i>Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h5>
                    
                    <div class="mb-3">
                        <label asp-for="PrivacyPolicy" class="form-label">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© (Ø¹Ø±Ø¨ÙŠ) ğŸ‡®ğŸ‡¶</label>
                        <textarea asp-for="PrivacyPolicy" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="PrivacyPolicy" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="PrivacyPolicyEn" class="form-label">Privacy Policy (English) ğŸ‡¬ğŸ‡§</label>
                        <textarea asp-for="PrivacyPolicyEn" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="PrivacyPolicyEn" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="PrivacyPolicyKu" class="form-label">Ø³ÛŒØ§Ø³Û•ØªÛŒ ØªØ§ÛŒØ¨Û•ØªÛØªÛŒ (Ú©ÙˆØ±Ø¯ÛŒ) ğŸ´</label>
                        <textarea asp-for="PrivacyPolicyKu" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="PrivacyPolicyKu" class="text-danger"></span>
                    </div>

                    <hr class="my-4">

                    <!-- Terms of Use -->
                    <h5 class="text-primary mb-3"><i class="fas fa-file-contract me-2"></i>Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h5>
                    
                    <div class="mb-3">
                        <label asp-for="TermsOfUse" class="form-label">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ø¹Ø±Ø¨ÙŠ) ğŸ‡®ğŸ‡¶</label>
                        <textarea asp-for="TermsOfUse" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="TermsOfUse" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="TermsOfUseEn" class="form-label">Terms of Use (English) ğŸ‡¬ğŸ‡§</label>
                        <textarea asp-for="TermsOfUseEn" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="TermsOfUseEn" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="TermsOfUseKu" class="form-label">Ù…Û•Ø±Ø¬Û•Ú©Ø§Ù†ÛŒ Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Ø§Ù† (Ú©ÙˆØ±Ø¯ÛŒ) ğŸ´</label>
                        <textarea asp-for="TermsOfUseKu" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="TermsOfUseKu" class="text-danger"></span>
                    </div>

                    <hr class="my-4">

                    <!-- Copyright Info -->
                    <h5 class="text-primary mb-3"><i class="fas fa-copyright me-2"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·Ø¨Ø¹</h5>
                    
                    <div class="mb-3">
                        <label asp-for="CopyrightInfo" class="form-label">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·Ø¨Ø¹ (Ø¹Ø±Ø¨ÙŠ) ğŸ‡®ğŸ‡¶</label>
                        <input asp-for="CopyrightInfo" class="form-control" placeholder="Â© 2024 Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹ÙƒØ³ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.">
                        <span asp-validation-for="CopyrightInfo" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="CopyrightInfoEn" class="form-label">Copyright Info (English) ğŸ‡¬ğŸ‡§</label>
                        <input asp-for="CopyrightInfoEn" class="form-control" placeholder="Â© 2024 Reverse Market. All rights reserved.">
                        <span asp-validation-for="CopyrightInfoEn" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="CopyrightInfoKu" class="form-label">Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ù…Ø§ÙÛŒ Ú†Ø§Ù¾ (Ú©ÙˆØ±Ø¯ÛŒ) ğŸ´</label>
                        <input asp-for="CopyrightInfoKu" class="form-control" placeholder="Â© 2024 Ø¨Ø§Ø²Ø§Ú•ÛŒ Ù¾ÛÚ†Û•ÙˆØ§Ù†Û•. Ù‡Û•Ù…ÙˆÙˆ Ù…Ø§ÙÛ•Ú©Ø§Ù† Ù¾Ø§Ø±ÛØ²Ø±Ø§ÙˆÙ†.">
                        <span asp-validation-for="CopyrightInfoKu" class="text-danger"></span>
                    </div>

                    <hr class="my-4">

                    <!-- Intellectual Property -->
                    <h5 class="text-primary mb-3"><i class="fas fa-balance-scale me-2"></i>Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„ÙÙƒØ±ÙŠØ©</h5>
                    
                    <div class="mb-3">
                        <label asp-for="IntellectualProperty" class="form-label">Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„ÙÙƒØ±ÙŠØ© (Ø¹Ø±Ø¨ÙŠ) ğŸ‡®ğŸ‡¶</label>
                        <textarea asp-for="IntellectualProperty" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="IntellectualProperty" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="IntellectualPropertyEn" class="form-label">Intellectual Property (English) ğŸ‡¬ğŸ‡§</label>
                        <textarea asp-for="IntellectualPropertyEn" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="IntellectualPropertyEn" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="IntellectualPropertyKu" class="form-label">Ù…ÙˆÚµÚ©ÛŒ Ø²ÛŒÙ‡Ù†ÛŒ (Ú©ÙˆØ±Ø¯ÛŒ) ğŸ´</label>
                        <textarea asp-for="IntellectualPropertyKu" class="form-control" rows="6"></textarea>
                        <span asp-validation-for="IntellectualPropertyKu" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-admin btn-lg">
                    <i class="fas fa-save me-2"></i>
                    Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Image preview for logo
        document.getElementById('logoFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    let preview = document.getElementById('logoPreview');
                    if (!preview) {
                        preview = document.createElement('img');
                        preview.id = 'logoPreview';
                        preview.className = 'img-thumbnail mt-2';
                        preview.style.maxHeight = '100px';
                        document.getElementById('logoFile').parentNode.appendChild(preview);
                    }
                    preview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        // Save scroll position on tab change
        document.querySelectorAll('button[data-bs-toggle="tab"]').forEach(button => {
            button.addEventListener('shown.bs.tab', function (event) {
                localStorage.setItem('activeTab', event.target.id);
            });
        });

        // Restore active tab on page load
        window.addEventListener('DOMContentLoaded', function() {
            const activeTab = localStorage.getItem('activeTab');
            if (activeTab) {
                const tabButton = document.getElementById(activeTab);
                if (tabButton) {
                    const tab = new bootstrap.Tab(tabButton);
                    tab.show();
                }
            }
        });
    </script>
}

<style>
    .flag-icon {
        font-size: 1.2em;
        margin-left: 5px;
    }

    .nav-tabs .nav-link {
        color: #495057;
        border: none;
        border-bottom: 3px solid transparent;
        transition: all 0.3s;
    }

    .nav-tabs .nav-link:hover {
        border-bottom-color: #b3962d;
        background-color: transparent;
    }

    .nav-tabs .nav-link.active {
        color: #b3962d;
        font-weight: 600;
        border-bottom-color: #b3962d;
        background-color: transparent;
    }

    .tab-content {
        padding-top: 1.5rem;
    }

    textarea.form-control {
        min-height: 100px;
    }
</style>
